# Clean Desktop
alias cleandesk='chflags hidden ~/Desktop/*'
alias nocleandesk='chflags nohidden ~/Desktop/*'

osxup() {
  rvm get stable && gem update;
  brew update && brew upgrade;
}

# VMs
vm() {
	nohup /Applications/VirtualBox.app/Contents/MacOS/VBoxHeadless -startvm $1 > /dev/null 2>&1&
}

# Sleep timer
sleeptime() {
  sleep $1; osascript -e 'tell application "System Events" to sleep'
}

# ssh-copy-id for the mac
ssh-copy-id() {
	USER=$(whoami)
	USAGE="Usage: `basename $0` [-i FILE] user@host"
	FILE="$HOME/.ssh/id_rsa.pub"

	if [ $# -lt 1 ]; then
		echo "$USAGE"
	fi


	while getopts “i::” OPTION; do
		case $OPTION in
			i)
				FILE=$OPTARG
				;;
			?)
				echo "$USAGE"
				;;
		esac
	done
	shift $OPTIND-1

	cat $FILE | ssh $1 "mkdir -p ~/.ssh; cat >> ~/.ssh/authorized_keys"
}

# Flush Directory Service cache
alias flush="dscacheutil -flushcache"

alias ls='ls -G'
alias du='du -k -d 1 $argv'

alias reload_webkit='osascript -e 'tell application "WebKit" to do JavaScript "window.location.reload()" in front document''

# Stuff I never really use but cannot delete either because of http://xkcd.com/530/
alias stfu="osascript -e 'set volume output muted true'"
alias pumpitup="osascript -e 'set volume 10'"

o() {
  if [ $ARGC -eq 0 ]
  then open .
  else open $@
  fi
}

function woman() {
  man -t "$@" | open -f -a Preview
}

function trash() {
  local trash_dir="${HOME}/.Trash"
  local temp_ifs=$IFS
  IFS=$'\n'
  for item in "$@"; do
    if [[ -e "$item" ]]; then
      item_name="$(basename $item)"
      if [[ -e "${trash_dir}/${item_name}" ]]; then
        mv -f "$item" "${trash_dir}/${item_name} $(date "+%H-%M-%S")"
      else
        mv -f "$item" "${trash_dir}/"
      fi
    fi
  done
  IFS=$temp_ifs
}
