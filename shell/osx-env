export EDITOR="vim"
export VISUAL="vim"

# Load ssh keys automatically
ssh-add -A 2>/dev/null

# Wrap git automatically
eval "$(hub alias -s)"

# Source autojump
[[ -s $(brew --prefix)/etc/profile.d/autojump.sh ]] && . $(brew --prefix)/etc/profile.d/autojump.sh

# Gopath from Homebrew
export PATH=$PATH:/usr/local/opt/go/libexec/bin

# Set Apple Terminal.app resume directory
if [[ $TERM_PROGRAM == "Apple_Terminal" ]] && [[ -z "$INSIDE_EMACS" ]]; then
	function chpwd {
		local SEARCH=' '
		local REPLACE='%20'
		local PWD_URL="file://$HOSTNAME${PWD//$SEARCH/$REPLACE}"
		printf '\e]7;%s\a' "$PWD_URL"
	}

	chpwd
fi

# Start gpg-agent
if [ -f "${HOME}/.gpg-agent-info" ]; then
	. "${HOME}/.gpg-agent-info"
	export GPG_AGENT_INFO
	export SSH_AUTH_SOCK
	export SSH_AGENT_PID
else
	eval $( gpg-agent --daemon --write-env-file ~/.gpg-agent-info )
fi
